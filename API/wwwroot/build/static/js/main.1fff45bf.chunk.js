(this["webpackJsonpclient-app"]=this["webpackJsonpclient-app"]||[]).push([[0],{297:function(e,t,a){},473:function(e,t,a){"use strict";a.r(t),a.d(t,"history",(function(){return Ye}));var r=a(40),n=a.n(r),s=(a(295),a(296),a(297),a(298),a(493)),o=a(496),i=a(507),c=a(277),l=a(495),u=a(514),d=a(21),j=a(30),b=a(0),h=a(492),v=a(186),m=a(146),O=a(264),p=a(299),g=a(220),f=a(491),x=a(499),D=a(513),k=a(502),y=a(503),R=a(504),w={enCA:D.a,pt:k.a,es:y.a,fr:R.a};v.a.use(O.a).use(m.e).init({resources:{es:{translation:{welcome:"Bienvenido al ",tReservations:"Reservaciones",bCreateReservation:"Crear Reserva",locale:"es",lDatefns:"",bGoDashboard:"\xa1Ll\xe9vame a las Reservas!",bLogin:"Iniciar sesi\xf3n",bRegister:"Crear cuenta",lCheckin:"Check-in",lCheckout:"Check-out",lEmail:"Correo electr\xf3nico",lPhone:"N\xfamero de tel\xe9fono",lPassword:"Contrase\xf1a",lName:"Nombre",lFirstName:"Nombre",lLastName:"Apellido",lCountry:"Pa\xeds",lCity:"Ciudad",lUsername:"Nombre de usuario",lLoadingReservations:"Cargando las reservas...",lLoadingApp:"Cargando la aplicaci\xf3n...",bErrors:"Errores",bAttendedBy:"Atendido por ",dates:{shorReservation:"{{ reservationDate, short }}",fullDatein:"{{ checkinDate, complete }}",fullDateout:"{{ checkoutDate, complete }}",shortDatein:"{{ checkinDate, short }}",shortDateout:"{{ checkoutDate, short }}",localisedDate:"{{ checkinDate, long }}",localisedDateout:"{{ checkoutDate, long }}",weekDay:"Today is a {{ date, EEEE }}.",postedOn:"{{ date, relative }} (that is {{ date, ago }}).",fullDateComplete:"The date is {{ date, complete }}",fullDateBig:"{{ date, big }}",reservedDate:"{{ reservedDate, relative }} ( {{ reservedDate, ago }})."},bViewReservation:"Ver reserva",vDeleteReservation:"Cancelar reserva",bEditReservation:"Editar reserva",lReservedIn:"Fecha en que se realiz\xf3 la reserva:",lUserDetails:"Detalles de usuario",lReservationDetails:"Detalles de la reserva",bCancel:"Cancelar",bSubmit:"Enviar",lAvailableDates:"Fechas disponibles",lFilters:"Filtros",fAllReservations:"Todas las reservas",fFutureReservations:"Reservas futuras",fCancelReservations:"Reservas canceladas",eInvalidEmailPassword:"Correo electr\xf3nico o contrase\xf1a no v\xe1lidos",lDelete:"\xbfQuieres eliminar esta reserva?",bDelete:"Eliminar"}},en:{translation:{welcome:"Welcome to",tReservations:"Reservations",bCreateReservation:"Create Reservation",locale:"en",lDatefns:"en",postedOn:"Posted on {{ date, MM/YY/DDDD }}",bGoDashboard:"Take me to the Reservations!",bLogin:"Sign in",bRegister:"Register",lCheckin:"Check-in",lCheckout:"Check-out",lEmail:"Email address",lPhone:"Phone",lPassword:"Password",lName:"Name",lFirstName:"First Name",lLastName:"Last Name",lCountry:"Country",lCity:"City",lUsername:"Username",lLoadingReservation:"Loading reservations...",lLoadingApp:"Loading app...",bErrors:"Errors",bAttendedBy:"Attended by ",dates:{shorReservation:"{{ reservationDate, short }}",fullDatein:"{{ checkinDate, complete }}",fullDateout:"{{ checkoutDate, complete }}",shortDatein:"{{ checkinDate, short }}",shortDateout:"{{ checkoutDate, short }}",localisedDate:"{{ checkinDate, long }}",localisedDateout:"{{ checkoutDate, long }}",weekDay:"Today is a {{ date, EEEE }}.",postedOn:"{{ date, relative }} (that is {{ date, ago }}).",fullDateComplete:"The date is {{ date, complete }}",fullDateBig:"{{ date, big }}",reservedDate:"{{ reservedDate, relative }} ( {{ reservedDate, ago }})."},bViewReservation:"View reservation",vDeleteReservation:"Delete reservation",bEditReservation:"Edit reservation",lReservedIn:"Reserved in:",lUserDetails:"User details",lReservationDetails:"Reservation details",bCancel:"Cancel",bSubmit:"Submit",lAvailableDates:"Available dates",lFilters:"Filters",fAllReservations:"All reservations",fFutureReservations:"Future reservations",fCancelReservations:"Canceled reservations",eInvalidEmailPassword:"Invalid email or password",lDelete:"Do you want to delete this reservation?",bDelete:"Delete"}},fr:{translation:{welcome:"Bienvenue sur ",tReservations:"R\xe9servation",bCreateReservation:"Cr\xe9er une R\xe9servation",locale:"fr-ca",lDatefns:"",bGoDashboard:"Emmenez-moi aux r\xe9servations!",bLogin:"Ouvrir une session",bRegister:"Cr\xe9er un compte",lCheckin:"Arriv\xe9e",lCheckout:"Depart",lEmail:"Adresse courriel",lPhone:"Num\xe9ro de t\xe9l\xe9phone",lPassword:"Mot de passe",lName:"Nom",lFirstName:"Pr\xe9nom",lLastName:"Nom de famille",lCountry:"Campagne",lCity:"Ville",lUsername:"Nom d'utilisateur",lLoadingReservations:"Chargement des r\xe9servations...",lLoadingApp:"Chargement de l'application...",bErrors:"Erreurs",bAttendedBy:"En pr\xe9sence de ",dates:{shorReservation:"{{ reservationDate, short }}",fullDatein:"{{ checkinDate, complete }}",fullDateout:"{{ checkoutDate, complete }}",shortDatein:"{{ checkinDate, short }}",shortDateout:"{{ checkoutDate, short }}",localisedDate:"{{ checkinDate, long }}",localisedDateout:"{{ checkoutDate, long }}",weekDay:"Today is a {{ date, EEEE }}.",postedOn:"{{ date, relative }} (that is {{ date, ago }}).",fullDateComplete:"The date is {{ date, complete }}",fullDateBig:"{{ date, big }}",reservedDate:"{{ reservedDate, relative }} ( {{ reservedDate, ago }})."},bViewReservation:"Voir la r\xe9servation",vDeleteReservation:"Annuler la r\xe9servation",bEditReservation:"Modifier la r\xe9servation",lReservedIn:"Date de la r\xe9servation :",lUserDetails:"D\xe9tails de l'utilisateur",lReservationDetails:"D\xe9tails de la r\xe9servation",bCancel:"Annuler",bSubmit:"Envier",lAvailableDates:"Dates disponibles",lFilters:"Filtres",fAllReservations:"Toutes les r\xe9servations",fFutureReservations:"R\xe9servations futures",fCancelReservations:"R\xe9servations annul\xe9es",eInvalidEmailPassword:"Email ou mot de passe invalide",lDelete:"Voulez-vous supprimer cette r\xe9servation\xa0?",bDelete:"Supprimer"}},pt:{translation:{welcome:"Bem-vindo ao",tReservations:"Reservas",bCreateReservation:"Criar Reserva",locale:"pt-br",lDatefns:"ptBR",postedOn:"Posted on {{ date, PPP }}",bGoDashboard:"Ir para as reservas!",bLogin:"Fazer login",bRegister:"Registrar",lCheckin:"Check-in",lCheckout:"Check-out",lEmail:"Endere\xe7o de e-mail",lPhone:"Telefone",lPassword:"Senha",lName:"Nome",lFirstName:"First Name",lLastName:"Last Name",lCountry:"Pa\xeds",lCity:"Cidade",lUsername:"Nome de usu\xe1rio",lLoadingReservations:"Carregando as reservas...",lLoadingApp:"Carregando o sistema...",bErrors:"Erros",bAttendedBy:"Atendido por ",onlyDateFormat:"",dates:{shorReservation:"{{ reservationDate, short }}",fullDatein:"{{ checkinDate, complete }}",fullDateout:"{{ checkoutDate, complete }}",shortDatein:"{{ checkinDate, short }}",shortDateout:"{{ checkoutDate, short }}",localisedDate:"{{ checkinDate, long }}",localisedDateout:"{{ checkoutDate, long }}",weekDay:"Today is a {{ date, EEEE }}.",postedOn:"{{ date, relative }} (that is {{ date, ago }}).",fullDateComplete:"The date is {{ date, complete }}",fullDateBig:"{{ date, big }}",reservedDate:"{{ reservedDate, relative }} ( {{ reservedDate, ago }})."},bViewReservation:"Visualizar reserva",vDeleteReservation:"Cancelar reserva",bEditReservation:"Editar reserva",lReservedIn:"Reservado em:",lUserDetails:"Detalhes do usu\xe1rio",lReservationDetails:"Detalhes da reserva",bCancel:"Cancelar",bSubmit:"Enviar",lAvailableDates:"Datas dispon\xedveis",lFilters:"Filtros",fAllReservations:"Todas as reservas",fFutureReservations:"Reservas futuras",fCancelReservations:"Reservas canceladas",eInvalidEmailPassword:"Email ou senha inv\xe1lida",lDelete:"Deseja deletar essa reserva?",bDelete:"Cancelar"}}},interpolation:{escapeValue:!1,format:function(e,t,a){if(Object(p.default)(e)){var r=w[a];return"short"===t?Object(g.default)(e,"P",{locale:r}):"complete"===t?Object(g.default)(e,"PP",{locale:r}):"big"===t?Object(g.default)(e,"PPP",{locale:r}):"long"===t?Object(g.default)(e,"PPPP",{locale:r}):"relative"===t?Object(f.a)(e,new Date,{locale:r}):"ago"===t?Object(x.a)(e,new Date,{locale:r,addSuffix:!0}):Object(g.default)(e,t,{locale:r})}return e}}}),v.a.changeLanguage("en");var C=a(1);function E(){var e=Object(b.useState)("en"),t=Object(j.a)(e,2)[1],a=function(e){e.preventDefault(),t(e.target.value),v.a.changeLanguage(e.target.value)};return Object(C.jsx)(C.Fragment,{children:Object(C.jsxs)(o.a.Item,{children:[Object(C.jsx)(i.a,{style:{margin:10},value:"es",onClick:a,children:Object(C.jsx)(h.a,{name:"es"})}),Object(C.jsx)(i.a,{style:{margin:10},value:"en",onClick:a,children:Object(C.jsx)(h.a,{name:"uk"})}),Object(C.jsx)(i.a,{style:{margin:10},value:"fr",onClick:a,children:Object(C.jsx)(h.a,{name:"fr"})}),Object(C.jsx)(i.a,{style:{margin:10},value:"pt",onClick:a,children:Object(C.jsx)(h.a,{name:"br"})})]})})}var S=a(14),I=a(13),A=a(48),L=a(23),F=a.n(L),N=a(55),P=a(15),M=a(33),T=a.n(M),B=a(130),q=function(e){return new Promise((function(t){setTimeout(t,e)}))};T.a.defaults.baseURL="/api",T.a.interceptors.request.use((function(e){var t=J.commonStore.token;return t&&(e.headers.Authorization="Bearer ".concat(t)),e})),T.a.interceptors.response.use(function(){var e=Object(N.a)(F.a.mark((function e(t){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q(1e3);case 2:return e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e){var t=e.response,a=t.data,r=t.status,n=t.config;switch(r){case 400:if("string"===typeof a&&B.b.error(a),"get"===n.method&&a.errors.hasOwnProperty("id")&&Ye.push("/not-found"),a.errors){var s=[];for(var o in a.errors)a.errors[o]&&s.push(a.errors[o]);throw s.flat()}B.b.error(a);break;case 401:B.b.error("unouthorised");break;case 404:Ye.push("/not-found");break;case 500:J.commonStore.setServerError(a),Ye.push("/server-error")}return Promise.reject(e)}));var z=function(e){return e.data},V=function(e){return T.a.get(e).then(z)},U=function(e,t){return T.a.post(e,t).then(z)},G={Reservations:{list:function(){return V("/reservations")},details:function(e){return V("/reservations/".concat(e))},create:function(e){return T.a.post("/reservations",e)},update:function(e){return T.a.put("/reservations/".concat(e.id),e)},delete:function(e){return T.a.delete("/reservations/".concat(e))}},Account:{current:function(){return V("/account")},login:function(e){return U("/account/login",e)},register:function(e){return U("/account/register",e)}}},Y=function(){function e(){var t=this;Object(S.a)(this,e),this.reservertionRegistry=new Map,this.selectedReservation=void 0,this.editMode=!1,this.loading=!1,this.loadingInitial=!1,this.loadReservations=Object(N.a)(F.a.mark((function e(){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loadingInitial=!0,e.prev=1,e.next=4,G.Reservations.list();case 4:e.sent.forEach((function(e){t.setReservation(e)})),t.setLoadingInitial(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0),t.setLoadingInitial(!1);case 13:case"end":return e.stop()}}),e,null,[[1,9]])}))),this.loadReservation=function(){var e=Object(N.a)(F.a.mark((function e(a){var r;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=t.getReservation(a))){e.next=6;break}return t.selectedReservation=r,e.abrupt("return",r);case 6:return t.loadingInitial=!0,e.prev=7,e.next=10,G.Reservations.details(a);case 10:return r=e.sent,t.setReservation(r),Object(I.h)((function(){t.selectedReservation=r})),t.setLoadingInitial(!1),e.abrupt("return",r);case 17:e.prev=17,e.t0=e.catch(7),console.log(e.t0),t.setLoadingInitial(!1);case 21:case"end":return e.stop()}}),e,null,[[7,17]])})));return function(t){return e.apply(this,arguments)}}(),this.setReservation=function(e){e.reservationDate=new Date(e.reservationDate),e.checkinDate=new Date(e.checkinDate),e.checkoutDate=new Date(e.checkoutDate),t.reservertionRegistry.set(e.id,e)},this.getReservation=function(e){return t.reservertionRegistry.get(e)},this.setLoadingInitial=function(e){t.loadingInitial=e},this.createReservation=function(){var e=Object(N.a)(F.a.mark((function e(a){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,e.next=4,G.Reservations.create(a);case 4:Object(I.h)((function(){t.reservertionRegistry.set(a.id,a),t.selectedReservation=a,t.editMode=!1,t.loading=!1})),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0),Object(I.h)((function(){t.loading=!1}));case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),this.updateReservation=function(){var e=Object(N.a)(F.a.mark((function e(a){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,e.next=4,G.Reservations.update(a);case 4:Object(I.h)((function(){t.reservertionRegistry.set(a.id,a),t.selectedReservation=a,t.editMode=!1,t.loading=!1})),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0),Object(I.h)((function(){t.loading=!1}));case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),this.deleteReservation=function(){var e=Object(N.a)(F.a.mark((function e(a){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,e.next=4,G.Reservations.delete(a);case 4:Object(I.h)((function(){t.reservertionRegistry.delete(a),t.loading=!1})),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0),Object(I.h)((function(){t.loading=!1}));case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),Object(I.d)(this)}return Object(P.a)(e,[{key:"getIntervalDate",get:function(){var e=new Date,t=new Date(e);t.setDate(t.getDate()+1);var a=new Date;return a.setMonth(a.getMonth()+1),{today:a}}},{key:"availableDate",get:function(){var e=this,t=new Date,a=new Date(t);a.setDate(a.getDate()+1);var r=new Date;r.setMonth(r.getMonth()+1);var n=this.getAllDatesBetweenTwoDates(a,r),s=Array.from(this.reservertionRegistry.values()).sort((function(e,t){return e.checkinDate.getTime()-t.checkinDate.getTime()})),o=[];s.forEach((function(t){e.getAllDatesBetweenTwoDates(t.checkinDate,t.checkoutDate).forEach((function(t){o.push(e.getOnlyDate(t))}))}));var i=[];return n.forEach((function(t){var a=e.getOnlyDate(t);i.push(a)})),i.filter((function(e){return o.indexOf(e)<0}))}},{key:"getOnlyDate",value:function(e){return new Date(e).toDateString()}},{key:"getAllDatesBetweenTwoDates",value:function(e,t){for(var a=[],r=new Date(e);r<=t;r.setDate(r.getDate()+1))a.push(new Date(r));return a}},{key:"reservationsByDate",get:function(){return Array.from(this.reservertionRegistry.values()).sort((function(e,t){return e.checkinDate.getTime()-t.checkinDate.getTime()}))}},{key:"groupedReservations",get:function(){return Object.entries(this.reservationsByDate.reduce((function(e,t){var a=Object(g.default)(t.checkinDate,"dd MMMM yyyy");return e[a]=e[a]?[].concat(Object(A.a)(e[a]),[t]):[t],e}),{}))}}]),e}(),H=function(){function e(){var t=this;Object(S.a)(this,e),this.user=null,this.login=function(){var e=Object(N.a)(F.a.mark((function e(a){var r;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,G.Account.login(a);case 3:r=e.sent,J.commonStore.setToken(r.token),Object(I.h)((function(){return t.user=r})),Ye.push("/reservations"),J.modalStore.closeModal(),e.next=13;break;case 10:throw e.prev=10,e.t0=e.catch(0),e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),this.logout=function(){J.commonStore.setToken(null),window.localStorage.removeItem("jwt"),t.user=null,Ye.push("/")},this.getUser=Object(N.a)(F.a.mark((function e(){var a;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,G.Account.current();case 3:a=e.sent,Object(I.h)((function(){return t.user=a})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),this.register=function(){var e=Object(N.a)(F.a.mark((function e(a){var r;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,G.Account.register(a);case 3:r=e.sent,J.commonStore.setToken(r.token),Object(I.h)((function(){return t.user=r})),Ye.push("/reservations"),J.modalStore.closeModal(),e.next=13;break;case 10:throw e.prev=10,e.t0=e.catch(0),e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),Object(I.d)(this)}return Object(P.a)(e,[{key:"isLoggedIn",get:function(){return!!this.user}}]),e}(),J={reservationStore:new Y,commonStore:new function e(){var t=this;Object(S.a)(this,e),this.error=null,this.token=window.localStorage.getItem("jwt"),this.appLoaded=!1,this.setServerError=function(e){t.error=e},this.setToken=function(e){t.token=e},this.setAppLoaded=function(){t.appLoaded=!0},Object(I.d)(this),Object(I.g)((function(){return t.token}),(function(e){e?window.localStorage.setItem("jwt",e):window.localStorage.removeItem("jwt")}))},userStore:new H,modalStore:new function e(){var t=this;Object(S.a)(this,e),this.modal={open:!1,body:null},this.openModal=function(e){t.modal.open=!0,t.modal.body=e},this.closeModal=function(){t.modal.open=!1,t.modal.body=null},Object(I.d)(this)}},Q=Object(b.createContext)(J);function W(){return Object(b.useContext)(Q)}var _=a(16),K=Object(_.a)((function(){var e=Object(u.a)().t,t=W().userStore,a=t.user,r=t.logout;return Object(C.jsxs)(o.a,{inverted:!0,fixed:"top",children:[Object(C.jsxs)(s.a,{children:[Object(C.jsxs)(o.a.Item,{as:d.b,to:"/",exact:!0,header:!0,children:[Object(C.jsx)("img",{src:"/assets/logo.png",alt:"logo",style:{marginRight:"10px"}}),"HotelScheduler"]}),Object(C.jsx)(o.a.Item,{as:d.b,to:"/reservations",name:e("tReservations")}),Object(C.jsx)(o.a.Item,{as:d.b,to:"/errors",name:e("bErrors")}),Object(C.jsx)(o.a.Item,{children:Object(C.jsx)(i.a,{as:d.b,to:"/createReservation",positive:!0,content:e("bCreateReservation")})})]}),Object(C.jsx)(s.a,{style:{justifyContent:"flex-end"},children:Object(C.jsx)(E,{})}),Object(C.jsxs)(o.a.Item,{position:"right",style:{marginRight:100},children:[Object(C.jsx)(c.a,{src:(null===a||void 0===a?void 0:a.image)||"https://react.semantic-ui.com/images/avatar/large/matthew.png",avatar:!0,spaced:"right"}),Object(C.jsx)(l.a,{pointing:"top left",text:null===a||void 0===a?void 0:a.displayName,children:Object(C.jsxs)(l.a.Menu,{children:[Object(C.jsx)(l.a.Item,{as:d.a,to:"/profile/".concat(null===a||void 0===a?void 0:a.username),text:"My Profile",icon:"user"}),Object(C.jsx)(l.a.Item,{onClick:r,text:"Logout",icon:"power"})]})})]})]})})),X=a(512),Z=a(508),$=a(494);function ee(e){var t=e.inverted,a=void 0===t||t,r=e.content,n=void 0===r?"Loading...":r;return Object(C.jsx)(Z.a,{active:!0,inverted:a,children:Object(C.jsx)($.a,{content:n})})}var te=a(276),ae=a(510);function re(){var e=Object(u.a)().t,t=new Date,a=new Date;return a.setMonth(t.getMonth()+1),Object(C.jsxs)(C.Fragment,{children:[Object(C.jsxs)(o.a,{vertical:!0,size:"large",style:{width:"100%",marginTop:25},children:[Object(C.jsx)(ae.a,{icon:"filter",attached:!0,color:"teal",content:e("lFilters")}),Object(C.jsx)(o.a.Item,{content:e("fAllReservations")}),Object(C.jsx)(o.a.Item,{content:e("fFutureReservations")}),Object(C.jsx)(o.a.Item,{content:e("fCancelReservations")})]}),Object(C.jsx)(ae.a,{}),Object(C.jsx)(te.a,{allowPartialRange:!0,selectRange:!0,minDate:t,maxDate:a,locale:e("locale")})]})}var ne=a(511),se=a(498),oe=a(93);function ie(e){var t=e.reservation,a=Object(u.a)().t,r=t.reservationDate,n=t.checkinDate,s=t.checkoutDate;return Object(C.jsxs)(ne.a.Group,{children:[Object(C.jsx)(ne.a,{children:Object(C.jsx)(se.a.Group,{children:Object(C.jsxs)(se.a,{children:[Object(C.jsx)(se.a.Image,{size:"tiny",circular:!0,src:"https://react.semantic-ui.com/images/avatar/large/matthew.png"}),Object(C.jsxs)(se.a.Content,{children:[Object(C.jsxs)(se.a.Header,{as:d.a,to:"/reservations/".concat(t.id),children:[t.firstName," ",t.lastName]}),Object(C.jsxs)(se.a.Meta,{children:[" ",Object(C.jsx)(oe.a,{name:"clock outline"})," ",a("lCheckin"),": ",a("dates.localisedDate",{checkinDate:n})]}),Object(C.jsxs)(se.a.Meta,{children:[" ",Object(C.jsx)(oe.a,{name:"clock"})," ",a("lCheckout"),": ",a("dates.localisedDateout",{checkoutDate:s})]})]}),Object(C.jsxs)(se.a.Description,{children:[a("bAttendedBy")," ",t.attendedBy]})]})})}),Object(C.jsx)(ne.a,{children:Object(C.jsxs)("span",{children:[Object(C.jsx)(oe.a,{name:"marker"})," ",t.country," - ",t.city]})}),Object(C.jsx)(ne.a,{secondary:!0,children:a("lReservedIn")}),Object(C.jsx)(ne.a,{clearing:!0,children:Object(C.jsxs)("span",{children:[a("dates.reservedDate",{reservedDate:r}),Object(C.jsx)(i.a,{as:d.a,to:"/reservations/".concat(t.id),color:"teal",floated:"right",content:a("bViewReservation")})]})})]})}var ce=Object(_.a)((function(){Object(u.a)().t;var e=W().reservationStore.groupedReservations;return Object(C.jsx)(C.Fragment,{children:e.map((function(e){var t=Object(j.a)(e,2),a=t[0],r=t[1];return Object(C.jsxs)(b.Fragment,{children:[Object(C.jsx)(ae.a,{sub:!0,color:"teal",children:a}),r.map((function(e){return Object(C.jsx)(ie,{reservation:e},e.id)}))]},a)}))})})),le=Object(_.a)((function(){var e=Object(u.a)().t,t=W().reservationStore,a=t.loadReservations,r=t.reservertionRegistry;return Object(b.useEffect)((function(){r.size<=1&&a()}),[r.size,a]),t.loadingInitial?Object(C.jsx)(ee,{content:e("lLoadingReservation")}):Object(C.jsxs)(X.a,{children:[Object(C.jsx)(X.a.Column,{width:"10",children:Object(C.jsx)(ce,{})}),Object(C.jsx)(X.a.Column,{width:"6",children:Object(C.jsx)(re,{})})]})})),ue=a(22),de=function(){var e=Object(u.a)().t;return Object(C.jsx)(ae.a,{as:"h1",inverted:!0,content:e("welcome")})},je=a(53),be=a(497),he=a(189),ve=a(68);function me(e){var t=Object(je.c)(e.name),a=Object(j.a)(t,2),r=a[0],n=a[1];return Object(C.jsxs)(be.a.Field,{error:n.touched&&!!n.error,children:[Object(C.jsx)("label",{children:e.label}),Object(C.jsx)("input",Object(ve.a)(Object(ve.a)({},r),e)),n.touched&&n.error?Object(C.jsx)(he.a,{basic:!0,color:"red",children:n.error}):null]})}var Oe=Object(_.a)((function(){var e=W().userStore,t=Object(u.a)().t;return Object(C.jsx)(je.b,{initialValues:{email:"",password:"",error:null},onSubmit:function(a,r){var n=r.setErrors;return e.login(a).catch((function(e){return n({error:t("eInvalidEmailPassword")})}))},children:function(e){var a=e.handleSubmit,r=e.isSubmitting,n=e.errors;return Object(C.jsxs)(be.a,{className:"ui form",onSubmit:a,autoComplete:"off",children:[Object(C.jsx)(ae.a,{as:"h2",content:t("bLogin"),color:"teal",textAlign:"center"}),Object(C.jsx)(me,{name:"email",placeholder:t("lEmail")}),Object(C.jsx)(me,{name:"password",placeholder:t("lPassword"),type:"password"}),Object(C.jsx)(je.a,{name:"error",render:function(){return Object(C.jsx)(he.a,{style:{marginBottom:10},basic:!0,color:"red",content:n.error})}}),Object(C.jsx)(i.a,{loading:r,positive:!0,content:t("bLogin"),type:"submit",fluid:!0})]})}})})),pe=a(37),ge=a(505);function fe(e){var t=e.errors;return Object(C.jsx)(ge.a,{error:!0,children:t&&Object(C.jsx)(ge.a.List,{children:t.map((function(e,t){return Object(C.jsxs)(ge.a.Item,{children:[" ",e]},t)}))})})}var xe=Object(_.a)((function(){var e=W().userStore,t=Object(u.a)().t;return Object(C.jsx)(je.b,{initialValues:{displayName:"",userName:"",country:"",city:"",email:"",password:"",error:null},onSubmit:function(t,a){var r=a.setErrors;return e.register(t).catch((function(e){return r({error:e})}))},validationSchema:pe.a({displayName:pe.b().required(),username:pe.b().required(),email:pe.b().required().email(),password:pe.b().required()}),children:function(e){var a=e.handleSubmit,r=e.isSubmitting,n=e.errors,s=e.isValid,o=e.dirty;return Object(C.jsxs)(be.a,{className:"ui form error",onSubmit:a,autoComplete:"off",children:[Object(C.jsx)(ae.a,{as:"h2",content:t("bRegister"),color:"teal",textAlign:"center"}),Object(C.jsx)(me,{name:"displayName",placeholder:t("lName")}),Object(C.jsx)(me,{name:"username",placeholder:t("lUsername")}),Object(C.jsx)(me,{name:"email",placeholder:t("lEmail")}),Object(C.jsx)(me,{name:"password",placeholder:t("lPassword"),type:"password"}),Object(C.jsx)(je.a,{name:"error",render:function(){return Object(C.jsx)(fe,{errors:n.error})}}),Object(C.jsx)(i.a,{disabled:!s||!o,loading:r,positive:!0,content:t("bRegister"),type:"submit",fluid:!0})]})}})})),De=Object(_.a)((function(){var e=Object(u.a)().t,t=W(),a=t.userStore,r=t.modalStore;return Object(C.jsx)(ne.a,{inverted:!0,textAlign:"center",vertical:!0,className:"masthead",children:Object(C.jsxs)(s.a,{text:!0,children:[Object(C.jsx)(de,{}),Object(C.jsxs)(ae.a,{as:"h1",inverted:!0,children:[Object(C.jsx)(c.a,{size:"massive",src:"/assets/logo.png",alt:"logo",style:{marginBottom:12}}),"HotelScheduler"]}),a.isLoggedIn?Object(C.jsx)(C.Fragment,{children:Object(C.jsx)(i.a,{as:d.a,to:"/reservations",size:"huge",inverted:!0,children:e("bGoDashboard")})}):Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(i.a,{onClick:function(){return r.openModal(Object(C.jsx)(Oe,{}))},size:"huge",inverted:!0,children:e("bLogin")}),Object(C.jsx)(i.a,{onClick:function(){return r.openModal(Object(C.jsx)(xe,{}))},size:"huge",inverted:!0,children:e("bRegister")})]}),Object(C.jsx)(E,{})]})})})),ke=a(500),ye=a(506),Re=a(273),we=a.n(Re);function Ce(e){var t=Object(je.c)(e.name),a=Object(j.a)(t,3),r=a[0],n=a[1],s=a[2];return Object(C.jsxs)(be.a.Field,{error:n.touched&&!!n.error,children:[Object(C.jsx)(we.a,Object(ve.a)(Object(ve.a)(Object(ve.a)({},r),e),{},{selected:r.value&&new Date(r.value)||null,onChange:function(e){return s.setValue(e)}})),n.touched&&n.error?Object(C.jsx)(he.a,{basic:!0,color:"red",children:n.error}):null]})}function Ee(e){var t=e.message;return Object(C.jsx)(ge.a,{error:!0,children:Object(C.jsxs)(ge.a.Item,{children:[" ",t]})})}var Se=Object(_.a)((function(){var e=Object(u.a)().t,t=Object(ue.f)(),a=W().reservationStore,r=a.createReservation,n=a.updateReservation,o=a.loading,c=a.loadReservation,l=a.availableDate,h=Object(ue.h)().id,v=Object(b.useState)(""),m=Object(j.a)(v,2),O=m[0],p=m[1],g=Object(b.useState)({id:"",reservationDate:null,checkinDate:null,checkoutDate:null,attendedBy:"",firstName:"",lastName:"",city:"",country:"",email:"",phone:""}),f=Object(j.a)(g,2),x=f[0],D=f[1],k=pe.a({checkinDate:pe.b().required("Checkin date is required").nullable(),checkoutDate:pe.b().required("Checkout date is required").nullable(),email:pe.b().required("Email is required").email().nullable(),firstName:pe.b().required("First name is required").nullable(),lastName:pe.b().required("Last name is required").nullable(),country:pe.b().required("Country is required").nullable(),city:pe.b().required("City is required").nullable(),phone:pe.b().required("Phone number is required").nullable()});Object(b.useEffect)((function(){h&&c(h).then((function(e){return D(e)}))}),[h,c]);var y=new Date,R=new Date(y);R.setDate(R.getDate()+1);var w=new Date;w.setMonth(w.getMonth()+1);function E(e){var a,s=e.checkinDate,o=e.checkoutDate;if(console.log(e.checkinDate),console.log(e.checkoutDate),function(e,t){var a=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()),r=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate());return Math.floor((r-a)/864e5)}(s,o)>=3)p("It is not possible to make a reservation for more than 3 days");else if(new Date(s)>new Date(o))p("Checkout date can not be before checkin date");else{for(var i=[],c=new Date(e.checkinDate);c<=e.checkoutDate;c.setDate(c.getDate()+1))i.push(new Date(c));console.log(i);var u=l;console.log(i);for(var d=[],j=i.length-1;j>=0;j--)for(var b=0;b<u.length;b++)a=i[j],new Date(a).toDateString()===u[b]&&d.push(u[b]);console.log(d),0!==d.length?function(e){if(0===e.id.length){var a=Object(ve.a)(Object(ve.a)({},e),{},{id:Object(ye.a)(),attendedBy:"Daniel",reservationDate:y});r(a).then((function(){return t.push("/reservations/".concat(a.id))}))}else n(e).then((function(){return t.push("/reservations/".concat(e.id))}))}(e):p("Data indispon\xedvel. Verifique as datas abaixo:")}}return o?Object(C.jsx)(ee,{content:e("lLoadingReservation")}):Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(ne.a,{clearing:!0,children:Object(C.jsx)(je.b,{validationSchema:k,enableReinitialize:!0,initialValues:x,onSubmit:function(e,t){t.resetForm;return E(e)},children:function(t){var a=t.handleSubmit,r=(t.isValid,t.isSubmitting);t.dirty;return Object(C.jsxs)(be.a,{onSubmit:a,autoComplete:"off",children:[Object(C.jsx)(ae.a,{content:e("lUserDetails"),sub:!0,color:"teal"}),Object(C.jsx)(me,{name:"firstName",placeholder:e("lFirstName")}),Object(C.jsx)(me,{name:"lastName",placeholder:e("lLastName")}),Object(C.jsx)(me,{name:"country",placeholder:e("lCountry")}),Object(C.jsx)(me,{name:"city",placeholder:e("lCity")}),Object(C.jsx)(me,{name:"email",placeholder:e("lEmail")}),Object(C.jsx)(me,{name:"phone",placeholder:e("lPhone")}),Object(C.jsx)(ae.a,{content:e("lReservationDetails"),sub:!0,color:"teal"}),Object(C.jsx)(Ce,{placeholderText:e("lCheckin"),name:"checkinDate",dateFormat:"MMMM d, yyyy",minDate:R,maxDate:w}),Object(C.jsx)(Ce,{placeholderText:e("lCheckout"),name:"checkoutDate",dateFormat:"MMMM d, yyyy",minDate:R,maxDate:w}),Object(C.jsx)(i.a,{disabled:r,loading:o,floated:"right",positive:!0,type:"submit",content:e("bSubmit")}),Object(C.jsx)(i.a,{as:d.a,to:"/reservations",floated:"right",type:"button",content:e("bCancel")})]})}})}),O&&Object(C.jsx)(Ee,{message:O}),Object(C.jsxs)(s.a,{children:[Object(C.jsx)(ae.a,{style:{fontSize:30},content:e("lAvailableDates"),sub:!0,color:"teal"}),Object(C.jsx)(ke.a,{divided:!0,relaxed:!0,children:l.map((function(e){return Object(C.jsx)(ke.a.Item,{children:e},e.toString())}))})]})]})})),Ie=Object(_.a)((function(e){var t=e.reservation,a=Object(u.a)().t,r=t.checkinDate,n=t.checkoutDate,s=t.reservationDate;return Object(C.jsxs)(ne.a.Group,{children:[Object(C.jsx)(ne.a,{attached:"top",children:Object(C.jsxs)(X.a,{children:[Object(C.jsx)(X.a.Column,{width:1,children:Object(C.jsx)(oe.a,{size:"large",color:"teal",name:"address book outline"})}),Object(C.jsx)(X.a.Column,{width:11,children:Object(C.jsxs)("p",{children:[t.firstName," ",t.lastName]})})]})}),Object(C.jsx)(ne.a,{attached:!0,children:Object(C.jsxs)(X.a,{verticalAlign:"middle",children:[Object(C.jsx)(X.a.Column,{width:1,children:Object(C.jsx)(oe.a,{name:"marker",size:"large",color:"teal"})}),Object(C.jsx)(X.a.Column,{width:11,children:Object(C.jsxs)("span",{children:[t.country,", ",t.city]})})]})}),Object(C.jsx)(ne.a,{attached:!0,children:Object(C.jsxs)(X.a,{verticalAlign:"middle",children:[Object(C.jsx)(X.a.Column,{width:1,children:Object(C.jsx)(oe.a,{name:"at",size:"large",color:"teal"})}),Object(C.jsx)(X.a.Column,{width:11,children:Object(C.jsx)("span",{children:t.email})})]})}),Object(C.jsx)(ne.a,{attached:!0,children:Object(C.jsxs)(X.a,{verticalAlign:"middle",children:[Object(C.jsx)(X.a.Column,{width:1,children:Object(C.jsx)(oe.a,{name:"phone",size:"large",color:"teal"})}),Object(C.jsx)(X.a.Column,{width:11,children:Object(C.jsxs)("span",{children:[t.phone," "]})})]})}),Object(C.jsx)(ne.a,{attached:!0,children:Object(C.jsxs)(X.a,{verticalAlign:"middle",children:[Object(C.jsx)(X.a.Column,{width:1,children:Object(C.jsx)(oe.a,{name:"calendar",size:"large",color:"teal"})}),Object(C.jsx)(X.a.Column,{width:11,children:Object(C.jsxs)(ke.a,{children:[Object(C.jsx)(ke.a.Item,{children:Object(C.jsxs)("span",{children:[" ",a("lCheckin"),":"," "," ",Object(C.jsx)("strong",{children:a("dates.shortDatein",{checkinDate:r})})]})}),Object(C.jsx)(ke.a.Item,{children:Object(C.jsxs)("span",{children:[a("lCheckout"),":"," ",Object(C.jsx)("strong",{children:a("dates.shortDateout",{checkoutDate:n})})]})}),Object(C.jsx)(ke.a.Item,{}),Object(C.jsx)(ke.a.Item,{children:Object(C.jsxs)("span",{children:[" ",a("bAttendedBy"),": ",Object(C.jsx)("strong",{children:t.attendedBy})," "]})}),Object(C.jsx)(ke.a.Item,{children:Object(C.jsxs)("span",{children:[a("lReservedIn")," ",Object(C.jsx)("strong",{children:a("dates.shorReservation",{reservationDate:s})})]})})]})})]})})]})})),Ae={filter:"brightness(30%)"},Le={position:"absolute",bottom:"5%",left:"5%",width:"100%",height:"auto",color:"white"},Fe=Object(_.a)((function(e){var t=e.reservation,a=e.translation,r=t.checkinDate,n=t.checkoutDate;return Object(C.jsxs)(ne.a.Group,{children:[Object(C.jsxs)(ne.a,{basic:!0,attached:"top",style:{padding:"0"},children:[Object(C.jsx)(c.a,{src:"http://www.nobretur.com.br/images/resized/tourist_packages/15245879535adf5db102303.jpg?s=medium",fluid:!0,style:Ae}),Object(C.jsx)(ne.a,{style:Le,basic:!0,children:Object(C.jsx)(se.a.Group,{children:Object(C.jsx)(se.a,{children:Object(C.jsxs)(se.a.Content,{children:[Object(C.jsx)(ae.a,{size:"huge",content:t.firstName,style:{color:"white"}}),Object(C.jsxs)("p",{children:[a("lCheckin"),":"," ",a("dates.fullDatein",{checkinDate:r})]}),Object(C.jsxs)("p",{children:[a("lCheckout"),":"," ",a("dates.fullDateout",{checkoutDate:n})]}),Object(C.jsxs)("p",{children:[a("bAttendedBy")," ",Object(C.jsx)("strong",{children:t.attendedBy})]})]})})})})]}),Object(C.jsxs)(ne.a,{clearing:!0,attached:"bottom",children:[Object(C.jsx)(i.a,{as:d.a,to:"/delete/".concat(t.id),children:a("vDeleteReservation")}),Object(C.jsx)(i.a,{as:d.a,to:"/manage/".concat(t.id),color:"orange",floated:"right",children:a("bEditReservation")})]})]})})),Ne=Object(_.a)((function(){var e=Object(u.a)().t,t=W().reservationStore,a=t.selectedReservation,r=t.loadReservation,n=t.loadingInitial,s=Object(ue.h)().id;return Object(b.useEffect)((function(){s&&r(s)}),[s,r]),n||!a?Object(C.jsx)(ee,{}):Object(C.jsxs)(X.a,{children:[Object(C.jsx)(X.a.Column,{width:10,children:Object(C.jsx)(Fe,{reservation:a,translation:e})}),Object(C.jsx)(X.a.Column,{width:6,children:Object(C.jsx)(Ie,{reservation:a})})]})}));function Pe(){var e=Object(b.useState)(null),t=Object(j.a)(e,2),a=t[0],r=t[1];return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(ae.a,{as:"h1",content:"Test Error component"}),Object(C.jsx)(ne.a,{children:Object(C.jsxs)(i.a.Group,{widths:"7",children:[Object(C.jsx)(i.a,{onClick:function(){T.a.get("/apibuggy/not-found").catch((function(e){return console.log(e.response)}))},content:"Not Found",basic:!0,primary:!0}),Object(C.jsx)(i.a,{onClick:function(){T.a.get("/apibuggy/bad-request").catch((function(e){return console.log(e.response)}))},content:"Bad Request",basic:!0,primary:!0}),Object(C.jsx)(i.a,{onClick:function(){T.a.post("/apireservations",{}).catch((function(e){return r(e)}))},content:"Validation Error",basic:!0,primary:!0}),Object(C.jsx)(i.a,{onClick:function(){T.a.get("/apibuggy/server-error").catch((function(e){return console.log(e.response)}))},content:"Server Error",basic:!0,primary:!0}),Object(C.jsx)(i.a,{onClick:function(){T.a.get("/apibuggy/unauthorised").catch((function(e){return console.log(e.response)}))},content:"Unauthorised",basic:!0,primary:!0}),Object(C.jsx)(i.a,{onClick:function(){T.a.get("/apibuggy/notaguid").catch((function(e){return console.log(e.response)}))},content:"Bad Guid",basic:!0,primary:!0})]})}),a&&Object(C.jsx)(fe,{errors:a})]})}function Me(){return Object(C.jsxs)(ne.a,{placeholder:!0,children:[Object(C.jsxs)(ae.a,{icon:!0,children:[Object(C.jsx)(oe.a,{name:"search"}),"Oops - we've looked everywhere and could not find this."]}),Object(C.jsx)(ne.a.Inline,{children:Object(C.jsx)(i.a,{as:d.a,to:"/reservations/",primary:!0,children:"Return to reservations"})})]})}var Te=Object(_.a)((function(){var e,t,a=W().commonStore;return Object(C.jsxs)(s.a,{children:[Object(C.jsx)(ae.a,{as:"h1",content:"Server Error"}),Object(C.jsx)(ae.a,{sub:!0,as:"h5",color:"red",content:null===(e=a.error)||void 0===e?void 0:e.message}),(null===(t=a.error)||void 0===t?void 0:t.details)&&Object(C.jsxs)(ne.a,{children:[Object(C.jsx)(ae.a,{as:"h4",content:"Stack trace",color:"teal"}),Object(C.jsxs)("code",{style:{marginTop:"10px"},children:[" ",a.error.details]})]})]})})),Be=a(501),qe=Object(_.a)((function(){var e=W().modalStore;return Object(C.jsx)(Be.a,{open:e.modal.open,onClose:e.closeModal,size:"mini",children:Object(C.jsx)(Be.a.Content,{children:e.modal.body})})}));function ze(){var e=Object(u.a)().t,t=Object(ue.f)(),a=W().reservationStore,r=a.deleteReservation,n=Object(ue.h)().id;return a.loadingInitial?Object(C.jsx)(ee,{content:e("lLoadingReservation")}):Object(C.jsx)(C.Fragment,{children:Object(C.jsxs)(ne.a,{placeholder:!0,children:[Object(C.jsxs)(ae.a,{icon:!0,children:[Object(C.jsx)(oe.a,{name:"delete",color:"red"}),e("lDelete")]}),Object(C.jsx)(ne.a.Inline,{children:Object(C.jsx)(i.a,{onClick:function(){r(n).then((function(){return t.push("/reservations")}))},negative:!0,children:e("bDelete")})})]})})}var Ve=Object(_.a)((function(){var e=Object(u.a)().t,t=Object(ue.g)(),a=W(),r=a.commonStore,n=a.userStore;return Object(b.useEffect)((function(){r.token?n.getUser().finally((function(){return r.setAppLoaded()})):r.setAppLoaded()}),[r,n]),r.appLoaded?Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(B.a,{position:"bottom-right",hideProgressBar:!0}),Object(C.jsx)(qe,{}),Object(C.jsx)(ue.a,{exact:!0,path:"/",component:De}),Object(C.jsx)(ue.a,{path:"/(.+)",render:function(){return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(K,{}),Object(C.jsx)(s.a,{style:{marginTop:"7em"},children:Object(C.jsxs)(ue.c,{children:[Object(C.jsx)(ue.a,{exact:!0,path:"/reservations",component:le}),Object(C.jsx)(ue.a,{path:"/reservations/:id",component:Ne}),Object(C.jsx)(ue.a,{path:["/createReservation","/manage/:id"],component:Se},t.key),Object(C.jsx)(ue.a,{path:["/deleteReservation","/delete/:id"],component:ze},t.key),Object(C.jsx)(ue.a,{path:"/errors",component:Pe}),Object(C.jsx)(ue.a,{path:"/server-error",component:Te}),Object(C.jsx)(ue.a,{path:"/login",component:Oe}),Object(C.jsx)(ue.a,{component:Me})]})})]})}})]}):Object(C.jsx)(ee,{content:e("lLoadingApp")})})),Ue=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,516)).then((function(t){var a=t.getCLS,r=t.getFID,n=t.getFCP,s=t.getLCP,o=t.getTTFB;a(e),r(e),n(e),s(e),o(e)}))},Ge=(a(467),a(468),a(469),a(470),a(471),a(44)),Ye=Object(Ge.a)();n.a.render(Object(C.jsx)(Q.Provider,{value:J,children:Object(C.jsx)(ue.b,{history:Ye,children:Object(C.jsx)(Ve,{})})}),document.getElementById("root")),Ue()}},[[473,1,2]]]);
//# sourceMappingURL=main.1fff45bf.chunk.js.map